- name: install stack dependencies
  dnf: name="{{ item }}" state=latest
  with_items:
    - perl
    - make
    - automake
    - gcc
    - gmp-devel
    - libffi
    - zlib
    - xz
    - tar
    - git
    - gnupg

- name: create stack path
  become: true
  become_user: "{{ USER }}" 
  file: 
    path: "{{ HOME }}/.local/bin"
    owner: "{{ USER }}"
    group: "{{ USER }}"
    state: directory
    recurse: true

- name: create zshrc.d/haskell.sh            
  file:
    src: haskell.sh
    dest: "{{ ZSHRCD }}/haskell.sh"
    owner: "{{ USER }}"
    group: "{{ USER }}"
    mode: "0700"            

- name: install stack
  become: true
  become_user: "{{ USER }}"
  raw: "curl -sSL https://get.haskellstack.org | sh"
